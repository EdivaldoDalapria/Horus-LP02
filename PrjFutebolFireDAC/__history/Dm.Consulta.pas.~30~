unit Dm.Consulta;

interface

uses
  System.SysUtils, System.Classes, FireDAC.Stan.Intf, FireDAC.Stan.Option,
  FireDAC.Stan.Param, FireDAC.Stan.Error, FireDAC.DatS, FireDAC.Phys.Intf,
  FireDAC.DApt.Intf, FireDAC.Stan.Async, FireDAC.DApt, Data.DB,
  FireDAC.Comp.DataSet, FireDAC.Comp.Client;

type
TTipoConsulta = (tpIniciando, tpContendo, tpIgual);
  TDmConsulta = class(TDataModule)
    QryCltaJogador: TFDQuery;
    QryCltaJogadorJOG_NUMERO: TIntegerField;
    QryCltaJogadorPAI_CODIGO: TIntegerField;
    QryCltaJogadorPAI_NOME: TStringField;
    QryCltaJogadorCLB_CODIGO: TIntegerField;
    QryCltaJogadorCLB_NOME: TStringField;
    QryCltaJogadorJOG_NOME: TStringField;
    QryCltaJogadorJOG_POSICAO: TStringField;
    QryCltaJogadorJOG_IDADE: TIntegerField;
    QryCltaJogadorJOG_LADO: TStringField;
    QryCltaJogadorJOG_TITULAR: TStringField;
    QryCltaJogadorJOG_CARACTERISTICA: TStringField;
    QryCltaTecnico: TFDQuery;
    QryCltaClube: TFDQuery;
    QryCltaTatica: TFDQuery;
    QryCltaPais: TFDQuery;
  private
    { Private declarations }
  public
    { Public declarations }
    procedure ConsultarJogador(const pCampoNome: string; const pTipo: TTipoConsulta; const pValor: string);
    procedure ConsultarTecnico(const pCampoNome: string; const pTipo: TTipoConsulta; const pValor: string);
    procedure ConsultarClube(const pCampoNome: string; const pTipo: TTipoConsulta; const pValor: string);
    procedure ConsultarTatica(const pCampoNome: string; const pTipo: TTipoConsulta; const pValor: string);
    procedure ConsultarPais(const pCampoNome: string; const pTipo: TTipoConsulta; const pValor: string);

  end;

var
  DmConsulta: TDmConsulta;

implementation

{%CLASSGROUP 'Vcl.Controls.TControl'}

uses Data_Module_Conexao;

{$R *.dfm}

{ TDmConsulta }

procedure TDmConsulta.ConsultarClube(const pCampoNome: string;
  const pTipo: TTipoConsulta; const pValor: string);
begin
  // método Consultar Clube
end;

procedure TDmConsulta.ConsultarJogador(const pCampoNome: string;
  const pTipo: TTipoConsulta; const pValor: string);
begin
  QryCltaJogador.Close;
  QryCltaJogador.SQL.Clear;
  QryCltaJogador.SQL.Add('SELECT jogador.jog_numero');
  QryCltaJogador.SQL.Add('       jogador.pai_codigo');
  QryCltaJogador.SQL.Add('       pais.pai_nome');
  QryCltaJogador.SQL.Add('       jogador.clb_codigo');
  QryCltaJogador.SQL.Add('       clube.clb_nome');
  QryCltaJogador.SQL.Add('       jogador.jog_nome');
  QryCltaJogador.SQL.Add('       jogador.jog_posicao');
  QryCltaJogador.SQL.Add('       jogador.jog_idade');
  QryCltaJogador.SQL.Add('       jogador.jog_lado');
  QryCltaJogador.SQL.Add('       jogador.jog_titula');
  QryCltaJogador.SQL.Add('       jogador.caracteristica');
  QryCltaJogador.SQL.Add('FROM jogador');
  QryCltaJogador.SQL.Add('INNER JOIN pais ON (jogador.pai_codigo = pais.pai_codigo)');
  QryCltaJogador.SQL.Add('INNER JOIN clube ON (jogador.clb_codigo = clube.clb_codigo)');
  case Ptipo of
     tpIniciando:
     begin
       QryCltaJogador.SQL.Add('EHERE ' + pCampoNome + ' LIKE ' + QuotedStr(pValor + '%'));
     end;
     tpContendo:
     begin
       QryCltaJogador.SQL.Add('EHERE ' + pCampoNome + ' LIKE ' + QuotedStr('%' + pValor + '%'));
     end;
     tpIgual:
     begin
       QryCltaJogador.SQL.Add('EHERE ' + pCampoNome + ' = ' + QuotedStr(pValor));
     end;
  end;
  QryCltaJogador.Open();
end;

procedure TDmConsulta.ConsultarPais(const pCampoNome: string;
  const pTipo: TTipoConsulta; const pValor: string);
begin
  // método Consultar Pais
end;

procedure TDmConsulta.ConsultarTatica(const pCampoNome: string;
  const pTipo: TTipoConsulta; const pValor: string);
begin
  // método Consultar Tatica
end;

procedure TDmConsulta.ConsultarTecnico(const pCampoNome: string;
  const pTipo: TTipoConsulta; const pValor: string);
begin
  // método Consultar Tecnico
end;

end.
